<!DOCTYPE html>
<html>
<head>
<title>PLAY NEW GAMES</title>
</head>
<style>
body {
	margin:0;
	padding:0;
	overflow:clip;
}
svg {
	height:100vh;
	width:auto;
}
#rects {
   opacity:1;
   fill:#00FF00;
   stroke:none;
   stroke-width:1;
   stroke-linejoin:round;
   stroke-miterlimit:4;
   stroke-dasharray:none;
}
</style>
<body>
<svg
   version="1.1"
   viewBox="0 0 279.4 215.9"
   height="8.5in"
   width="11in">
  <g
     id="rects"
     transform="translate(2.0980835e-6,6.4729273)">
    <rect
       y="12.548811"
       x="65.786201"
       height="56.011642"
       width="46.00201"
       id="rect908"
	   />
    <rect
       id="rect910"
       width="46.00201"
       height="56.011642"
       x="116.69901"
       y="12.548811" />
    <rect
       y="12.548811"
       x="167.6118"
       height="56.011642"
       width="46.00201"
       id="rect912"
	   />
    <rect
       y="73.471252"
       x="14.873388"
       height="56.011642"
       width="46.00201"
       id="rect4648"
	   />
    <rect
       id="rect4650"
       width="46.00201"
       height="56.011642"
       x="65.786201"
       y="73.471252" />
    <rect
       y="73.471252"
       x="116.69901"
       height="56.011642"
       width="46.00201"
       id="rect4652"
	   />
    <rect
       y="134.39369"
       x="14.873388"
       height="56.011642"
       width="46.00201"
       id="rect4658"
	   />
    <rect
       id="rect4660"
       width="46.00201"
       height="56.011642"
       x="65.786201"
       y="134.39369" />
    <rect
       y="134.39369"
       x="116.69901"
       height="56.011642"
       width="46.00201"
       id="rect4662"
	   />
    <rect
       id="rect4664"
       width="46.00201"
       height="56.011642"
       x="167.6118"
       y="134.39369" />
    <rect
       y="134.39369"
       x="218.5246"
       height="56.011642"
       width="46.00201"
       id="rect4666"
	   />
    <rect
       y="12.548811"
       x="14.873388"
       height="56.011642"
       width="46.00201"
       id="rect5574"
	   />
  </g>
  <g
     id="paths"
     transform="translate(1.6949959e-4,6.4729295)" >
    <path
       inkscape:connector-curvature="0"
       id="path4823"
       d="m 65.786201,73.471252 v 15.18099 5.23431 15.180978 5.23431 15.18098 H 111.78856 V 114.30184 H 80.967181 v -5.23431 h 15.63975 V 93.886552 h -15.63975 v -5.23431 H 111.78856 V 73.471252 H 80.967181 Z"
	   />
    <path
       d="M 65.786201,12.548885 V 53.379468 68.560453 H 80.967186 111.78856 V 53.379468 H 80.967186 V 12.548885 Z"
       id="rect4718"
       inkscape:connector-curvature="0" />
    <path
       d="m 167.6118,12.548811 15.18099,18.484142 v 37.527425 h 15.64038 V 31.032953 l 15.18099,-18.484142 h -15.18099 -15.64038 z"
       id="path4723"
       inkscape:connector-curvature="0" />
    <path
       d="m 116.699,68.560455 23.00101,-56.011633 23.00101,56.011633 z"
       id="path4792"
       inkscape:connector-curvature="0" />
    <path
       inkscape:connector-curvature="0"
       id="path4794"
       d="m 65.786188,190.40533 23.00101,-56.01163 23.001012,56.01163 z"
	   />
    <path
       d="m 30.054138,129.48289 v -28.00581 l 15.64027,28.00581 h 15.181 V 73.471252 H 45.694138 V 101.47707 L 30.054388,73.471252 h -15.181 v 56.011638 z"
       id="path4801"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="ccccccccccc" />
    <path
       d="m 116.69901,73.471252 v 56.011568 h 15.18098 15.64039 15.18098 V 73.471252 h -15.18098 v 37.527428 l -7.8202,-9.52191 -7.82019,9.52191 V 73.471252 Z"
       id="path4803"
       inkscape:connector-curvature="0" />
    <path
       inkscape:connector-curvature="0"
       id="path4810"
       d="m 116.69901,190.40526 v -56.01157 h 15.18098 15.64039 15.18098 v 56.01157 h -15.18098 v -37.52743 l -7.8202,9.52192 -7.82019,-9.52192 v 37.52743 z"
	   />
    <path
       d="m 167.6118,134.39369 v 15.18099 5.23431 15.18098 5.23431 15.18098 h 46.00236 v -15.18098 h -30.82138 v -5.23431 h 15.63975 v -15.18098 h -15.63975 v -5.23431 h 30.82138 v -15.18099 h -30.82138 z"
       id="path4825"
       inkscape:connector-curvature="0" />
    <path
       d="m 241.52544,134.39369 c -12.70304,-1e-4 -23.00099,10.29762 -23.00118,23.00067 -5e-5,7.19275 3.30309,13.61215 8.47339,17.82991 h -8.47339 v 15.18099 h 15.18099 7.82019 c 12.70305,1e-4 23.001,-10.29763 23.00118,-23.00066 6e-5,-7.19276 -3.30309,-13.61216 -8.47338,-17.82992 h 8.47338 v -15.18099 h -15.18098 z"
       id="path4827"
       inkscape:connector-curvature="0" />
    <path
       id="path4840"
       d="m 14.873388,134.39369 v 15.18099 40.83058 h 15.180985 30.821373 v -15.18099 -5.2343 -15.18099 H 45.694761 37.874567 v 15.18099 h 7.820194 v 5.2343 H 30.054373 v -25.64959 h 30.821373 v -15.18099 z"
       inkscape:connector-curvature="0" />
    <path
       sodipodi:nodetypes="cccccccccc"
       inkscape:connector-curvature="0"
       id="path5576"
       d="M 37.87422,58.550733 C 50.577461,58.550831 60.875499,48.252716 60.875399,35.549475 60.875213,22.846435 50.57726,12.548712 37.87422,12.548811 H 30.054026 14.873041 V 35.549475 68.560378 H 30.054026 V 58.550733 Z"
	   />
  </g>
</svg>
<script>

function get(tagName) {
	var list = document.getElementsByTagName(tagName);
	var ret = [];
	for (var i = 0; i < list.length; ++i) {
		ret.push(list[i]);
	}
	return ret;
}

var rects = get("rect");
var paths = get("path");

var acc = 0.0;
var acc2 = 0.0;


function makeStyle() {
	var style = {};
	if (Math.random() < 0.6) {
		var ofs = 1.0 + Math.random() * 7.0;
		if (Math.random() < 0.5) ofs = -ofs;
		style.pathX = 0.5 * ofs;
		style.pathY = 0.5 * ofs;
		style.rectX = -0.5 * ofs;
		style.rectY = -0.5 * ofs;
	} else {
		style.pathX = 0.0;
		style.pathY = 0.0;
		style.rectX = 0.0;
		style.rectY = 0.0;
	}

	function rc(a) {
		var col = [
			Math.random(),
			Math.random(),
			Math.random(),
			a];
		var min = Math.min(col[0], col[1], col[2]);
		var max = Math.max(col[0], col[1], col[2]);
		col[0] = (col[0] - min) / (max-min);
		col[1] = (col[1] - min) / (max-min);
		col[2] = (col[2] - min) / (max-min);
		return col;
	}
	function rep(a) {
		var ret = [];
		for (var i = 0; i < paths.length; ++i) {
			ret.push(a);
		}
		return ret;
	}

	style.randomize = function() { };

	var v = Math.random();
	if (v < 1.0 / 3.0) {
		style.rectFills = rep([0,0,0,1.0]);
		if (Math.random() < 0.1) {
			style.rectFills = rep(rc(1.0));
		}
		style.pathFills = rep(rc(1.0));
		if (Math.random() < 0.5) {
			style.randomize = function() {
				for (var i = 0; i < paths.length; ++i) {
					style.pathFills[i] = rc(1.0);
				}
			};
		}
	} else if (v < 2.0 / 3.0) {
		style.pathFills = rep([0,0,0,1.0]);
		style.rectFills = rep(rc(1.0));
		if (Math.random() < 0.5) {
			style.randomize = function() {
				for (var i = 0; i < paths.length; ++i) {
					style.rectFills[i] = rc(1.0);
				}
			};
		}
	} else {
		var c = [Math.random(), Math.random(), Math.random(), 0.5];
		style.rectFills = rep(c);
		style.pathFills = rep(c);
	}

	var v = Math.random();
	if (v < 1.0 / 3.0) {
		style.pathStroke = [0,0,0,1.0];
		style.rectStroke = [0,0,0,1.0];
	} else {
		style.pathStroke = [0,0,0,0];
		style.rectStroke = [0,0,0,0];
	}

	style.randomize();

	return style;
}

var oldStyle = makeStyle();
var style = makeStyle();

function anim(ts) {
	var elapsed = 0.0;
	if ('ts' in anim) {
		elapsed = (ts - anim.ts) / 1000.0;
	}
	anim.ts = ts;

	acc += elapsed / 5.0;

	if (acc > 1.0) {
		oldStyle = style;
		style = makeStyle();
		acc = 0.0;
	}

	acc2 += elapsed / 0.5;

	if (acc2 > 1.0) {
		oldStyle.randomize();
		style.randomize();
		acc2 = 0.0;
	}

	function rgba(col) {
		return "rgba("
			+ Math.round(255 * col[0]) + ", "
			+ Math.round(255 * col[1]) + ", "
			+ Math.round(255 * col[2]) + ", "
			+ col[3] + ")";
	}

	function interp(i, a,b) {
		var amt = acc / 0.05 - 1.0 * (i / paths.length);
		amt = Math.min(amt, 1.0);
		amt = Math.max(amt, 0.0);
		if (amt >= 1.0) return b;
		return (b-a) * amt + a;
	}
	function interpCol(i, a,b) {
		return [
			interp(i, a[0], b[0]),
			interp(i, a[1], b[1]),
			interp(i, a[2], b[2]),
			interp(i, a[3], b[3])
		];
	}

	rects.forEach(function(rect, i){
		rect.setAttribute("transform", "translate("
			+ interp(i, oldStyle.rectX, style.rectX) + ","
			+ interp(i, oldStyle.rectY, style.rectY) + ")");
		rect.style.fill = rgba(interpCol(i, oldStyle.rectFills[i], style.rectFills[i]));
		rect.style.stroke = rgba(interpCol(i, oldStyle.rectStroke, style.rectStroke));
	});
	paths.forEach(function(path, i){
		path.setAttribute("transform", "translate("
			+ interp(i, oldStyle.pathX, style.pathX) + ","
			+ interp(i, oldStyle.pathY, style.pathY) + ")");
		path.style.fill = rgba(interpCol(i, oldStyle.pathFills[i], style.pathFills[i]));
		path.style.stroke = rgba(interpCol(i, oldStyle.pathStroke, style.pathStroke));

	});

	window.requestAnimationFrame(anim);
}

window.requestAnimationFrame(anim);
</script>

</body>
</html>
